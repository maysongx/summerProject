(function(b){function f(e){return RegExp("(^|\\s+)"+e+"(\\s+|$)")}function a(k,l){var j=h(k,l)?d:g;j(k,l)}var h,g,d;"classList" in document.documentElement?(h=function(i,j){return i.classList.contains(j)},g=function(i,j){i.classList.add(j)},d=function(i,j){i.classList.remove(j)}):(h=function(j,e){return f(e).test(j.className)},g=function(i,j){h(i,j)||(i.className=i.className+" "+j)},d=function(j,e){j.className=j.className.replace(f(e)," ")});var c={hasClass:h,addClass:g,removeClass:d,toggleClass:a,has:h,add:g,remove:d,toggle:a};"function"==typeof define&&define.amd?define(c):b.classie=c})(window),function(b){function d(j){var h=b.event;return h.target=h.target||h.srcElement||j,h}var a=document.documentElement,g=function(){};a.addEventListener?g=function(j,k,h){j.addEventListener(k,h,!1)}:a.attachEvent&&(g=function(h,e,j){h[e+j]=j.handleEvent?function(){var k=d(h);j.handleEvent.call(j,k)}:function(){var k=d(h);j.call(h,k)},h.attachEvent("on"+e,h[e+j])});var f=function(){};a.removeEventListener?f=function(j,k,h){j.removeEventListener(k,h,!1)}:a.detachEvent&&(f=function(j,k,h){j.detachEvent("on"+k,j[k+h]);try{delete j[k+h]}catch(l){j[k+h]=void 0}});var c={bind:g,unbind:f};"function"==typeof define&&define.amd?define(c):"object"==typeof exports?module.exports=c:b.eventie=c}(this),function(b){function d(e){"function"==typeof e&&(d.isReady?e():c.push(e))}function a(j){var h="readystatechange"===j.type&&"complete"!==f.readyState;if(!d.isReady&&!h){d.isReady=!0;for(var l=0,k=c.length;k>l;l++){var e=c[l];e()}}}function g(e){return e.bind(f,"DOMContentLoaded",a),e.bind(f,"readystatechange",a),e.bind(b,"load",a),d}var f=b.document,c=[];d.isReady=!1,"function"==typeof define&&define.amd?(d.isReady="function"==typeof requirejs,define(["eventie/eventie"],g)):b.docReady=g(b.eventie)}(this),function(b){function c(f){if(f){if("string"==typeof d[f]){return f}f=f.charAt(0).toUpperCase()+f.slice(1);for(var h,i=0,g=a.length;g>i;i++){if(h=a[i]+f,"string"==typeof d[h]){return h}}}}var a="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return c}):"object"==typeof exports?module.exports=c:b.getStyleProperty=c}(window),function(){function b(){}function d(j,k){for(var h=j.length;h--;){if(j[h].listener===k){return h}}return -1}function a(e){return function(){return this[e].apply(this,arguments)}}var g=b.prototype,f=this,c=f.EventEmitter;g.getListeners=function(j){var k,h,l=this._getEvents();if(j instanceof RegExp){k={};for(h in l){l.hasOwnProperty(h)&&j.test(h)&&(k[h]=l[h])}}else{k=l[j]||(l[j]=[])}return k},g.flattenListeners=function(j){var k,h=[];for(k=0;j.length>k;k+=1){h.push(j[k].listener)}return h},g.getListenersAsObject=function(j){var k,h=this.getListeners(j);return h instanceof Array&&(k={},k[j]=h),k||h},g.addListener=function(h,e){var l,k=this.getListenersAsObject(h),j="object"==typeof e;for(l in k){k.hasOwnProperty(l)&&-1===d(k[l],e)&&k[l].push(j?e:{listener:e,once:!1})}return this},g.on=a("addListener"),g.addOnceListener=function(h,i){return this.addListener(h,{listener:i,once:!0})},g.once=a("addOnceListener"),g.defineEvent=function(e){return this.getListeners(e),this},g.defineEvents=function(h){for(var i=0;h.length>i;i+=1){this.defineEvent(h[i])}return this},g.removeListener=function(h,e){var l,k,j=this.getListenersAsObject(h);for(k in j){j.hasOwnProperty(k)&&(l=d(j[k],e),-1!==l&&j[k].splice(l,1))}return this},g.off=a("removeListener"),g.addListeners=function(h,i){return this.manipulateListeners(!1,h,i)},g.removeListeners=function(h,i){return this.manipulateListeners(!0,h,i)},g.manipulateListeners=function(j,m,h){var q,p,l=j?this.removeListener:this.addListener,k=j?this.removeListeners:this.addListeners;if("object"!=typeof m||m instanceof RegExp){for(q=h.length;q--;){l.call(this,m,h[q])}}else{for(q in m){m.hasOwnProperty(q)&&(p=m[q])&&("function"==typeof p?l.call(this,q,p):k.call(this,q,p))}}return this},g.removeEvent=function(j){var k,h=typeof j,l=this._getEvents();if("string"===h){delete l[j]}else{if(j instanceof RegExp){for(k in l){l.hasOwnProperty(k)&&j.test(k)&&delete l[k]}}else{delete this._events}}return this},g.removeAllListeners=a("removeEvent"),g.emitEvent=function(j,m){var h,q,p,l,k=this.getListenersAsObject(j);for(p in k){if(k.hasOwnProperty(p)){for(q=k[p].length;q--;){h=k[p][q],h.once===!0&&this.removeListener(j,h.listener),l=h.listener.apply(this,m||[]),l===this._getOnceReturnValue()&&this.removeListener(j,h.listener)}}}return this},g.trigger=a("emitEvent"),g.emit=function(h){var i=Array.prototype.slice.call(arguments,1);return this.emitEvent(h,i)},g.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},g._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},g._getEvents=function(){return this._events||(this._events={})},b.noConflict=function(){return f.EventEmitter=c,b},"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof module&&module.exports?module.exports=b:this.EventEmitter=b}.call(this),function(a,b){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("eventEmitter"),require("eventie")):a.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(this,function(A,v,m){function j(c,d){for(var a in d){c[a]=d[a]}return c}function g(a){return"[object Array]"===w.call(a)}function b(c){var d=[];if(g(c)){d=c}else{if("number"==typeof c.length){for(var a=0,h=c.length;h>a;a++){d.push(c[a])}}else{d.push(c)}}return d}function B(c,d,a){if(!(this instanceof B)){return new B(c,d)}"string"==typeof c&&(c=document.querySelectorAll(c)),this.elements=b(c),this.options=j({},this.options),"function"==typeof d?a=d:j(this.options,d),a&&this.on("always",a),this.getImages(),q&&(this.jqDeferred=new q.Deferred);var h=this;setTimeout(function(){h.check()})}function y(a){this.img=a}function z(a){this.src=a,k[a]=this}var q=A.jQuery,x=A.console,f=x!==void 0,w=Object.prototype.toString;B.prototype=new v,B.prototype.options={},B.prototype.getImages=function(){this.images=[];for(var c=0,l=this.elements.length;l>c;c++){var a=this.elements[c];"IMG"===a.nodeName&&this.addImage(a);for(var u=a.querySelectorAll("img"),p=0,h=u.length;h>p;p++){var d=u[p];this.addImage(d)}}},B.prototype.addImage=function(a){var c=new y(a);this.images.push(c)},B.prototype.check=function(){function c(e,i){return h.options.debug&&f&&x.log("confirm",e,i),h.progress(e),a++,a===p&&h.complete(),!0}var h=this,a=0,p=this.images.length;if(this.hasAnyBroken=!1,!p){return this.complete(),void 0}for(var l=0;p>l;l++){var d=this.images[l];d.on("confirm",c),d.check()}},B.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var c=this;setTimeout(function(){c.emit("progress",c,a),c.jqDeferred&&c.jqDeferred.notify&&c.jqDeferred.notify(c,a)})},B.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var c=this;setTimeout(function(){if(c.emit(a,c),c.emit("always",c),c.jqDeferred){var d=c.hasAnyBroken?"reject":"resolve";c.jqDeferred[d](c)}})},q&&(q.fn.imagesLoaded=function(c,d){var a=new B(this,c,d);return a.jqDeferred.promise(q(this))}),y.prototype=new v,y.prototype.check=function(){var a=k[this.img.src]||new z(this.img.src);if(a.isConfirmed){return this.confirm(a.isLoaded,"cached was confirmed"),void 0}if(this.img.complete&&void 0!==this.img.naturalWidth){return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0}var c=this;a.on("confirm",function(e,d){return c.confirm(e.isLoaded,d),!0}),a.check()},y.prototype.confirm=function(a,c){this.isLoaded=a,this.emit("confirm",this,c)};var k={};return z.prototype=new v,z.prototype.check=function(){if(!this.isChecked){var a=new Image;m.bind(a,"load",this),m.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},z.prototype.handleEvent=function(a){var c="on"+a.type;this[c]&&this[c](a)},z.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},z.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},z.prototype.confirm=function(a,c){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,c)},z.prototype.unbindProxyEvents=function(a){m.unbind(a.target,"load",this),m.unbind(a.target,"error",this)},B}),function(b){function c(){}function a(f){function e(i){i.prototype.option||(i.prototype.option=function(j){f.isPlainObject(j)&&(this.options=f.extend(!0,this.options,j))})}function h(k,j){f.fn[k]=function(r){if("string"==typeof r){for(var n=d.call(arguments,1),i=0,l=this.length;l>i;i++){var m=this[i],t=f.data(m,k);if(t){if(f.isFunction(t[r])&&"_"!==r.charAt(0)){var q=t[r].apply(t,n);if(void 0!==q){return q}}else{g("no such method '"+r+"' for "+k+" instance")}}else{g("cannot call methods on "+k+" prior to initialization; attempted to call '"+r+"'")}}return this}return this.each(function(){var o=f.data(this,k);o?(o.option(r),o._init()):(o=new j(this,r),f.data(this,k,o))})}}if(f){var g="undefined"==typeof console?c:function(i){console.error(i)};return f.bridget=function(i,j){e(j),h(i,j)},f.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],a):a(b.jQuery)}(window),function(b){function f(k){var l=parseFloat(k),j=-1===k.indexOf("%")&&!isNaN(l);return j&&l}function a(){for(var k={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},l=0,j=c.length;j>l;l++){var m=c[l];k[m]=0}return k}function h(j){function l(C){if("string"==typeof C&&(C=document.querySelector(C)),C&&"object"==typeof C&&C.nodeType){var G=d(C);if("none"===G.display){return a()}var F={};F.width=C.offsetWidth,F.height=C.offsetHeight;for(var N=F.isBorderBox=!(!k||!G[k]||"border-box"!==G[k]),D=0,M=c.length;M>D;D++){var I=c[D],K=G[I];K=e(C,K);var H=parseFloat(K);F[I]=isNaN(H)?0:H}var s=F.paddingLeft+F.paddingRight,J=F.paddingTop+F.paddingBottom,A=F.marginLeft+F.marginRight,O=F.marginTop+F.marginBottom,B=F.borderLeftWidth+F.borderRightWidth,z=F.borderTopWidth+F.borderBottomWidth,r=N&&i,q=f(G.width);q!==!1&&(F.width=q+(r?0:s+B));var u=f(G.height);return u!==!1&&(F.height=u+(r?0:J+z)),F.innerWidth=F.width-(s+B),F.innerHeight=F.height-(J+z),F.outerWidth=F.width+A,F.outerHeight=F.height+O,F}}function e(o,u){if(g||-1===u.indexOf("%")){return u}var m=o.style,v=m.left,q=o.runtimeStyle,p=q&&q.left;return p&&(q.left=o.currentStyle.left),m.left=u,u=m.pixelLeft,m.left=v,p&&(q.left=p),u}var i,k=j("boxSizing");return function(){if(k){var o=document.createElement("div");o.style.width="200px",o.style.padding="1px 2px 3px 4px",o.style.borderStyle="solid",o.style.borderWidth="1px 2px 3px 4px",o.style[k]="border-box";var m=document.body||document.documentElement;m.appendChild(o);var p=d(o);i=200===f(p.width),m.removeChild(o)}}(),l}var g=b.getComputedStyle,d=g?function(e){return g(e,null)}:function(e){return e.currentStyle},c=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],h):"object"==typeof exports?module.exports=h(require("get-style-property")):b.getSize=h(b.getStyleProperty)}(window),function(m,j){function f(a,h){return a[k](h)}function d(a){if(!a.parentNode){var h=document.createDocumentFragment();h.appendChild(a)}}function c(h,q){d(h);for(var a=h.parentNode.querySelectorAll(q),s=0,n=a.length;n>s;s++){if(a[s]===h){return !0}}return !1}function b(a,h){return d(a),f(a,h)}var p,k=function(){if(j.matchesSelector){return"matchesSelector"}for(var e=["webkit","moz","ms","o"],a=0,s=e.length;s>a;a++){var q=e[a],h=q+"MatchesSelector";if(j[h]){return h}}}();if(k){var l=document.createElement("div"),g=f(l,"div");p=g?f:b}else{p=c}"function"==typeof define&&define.amd?define(function(){return p}):window.matchesSelector=p}(this,Element.prototype),function(b){function f(k,l){for(var j in l){k[j]=l[j]}return k}function a(i){for(var j in i){return !1}return j=null,!0}function h(e){return e.replace(/([A-Z])/g,function(i){return"-"+i.toLowerCase()})}function g(E,j,e){function B(l,m){l&&(this.element=l,this.layout=m,this.position={x:0,y:0},this._create())}var D=e("transition"),q=e("transform"),z=D&&q,i=!!e("perspective"),x={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[D],n=["transform","transition","transitionDuration","transitionProperty"],w=function(){for(var m={},p=0,l=n.length;l>p;p++){var u=n[p],r=e(u);r&&r!==u&&(m[u]=r)}return m}();f(B.prototype,E.prototype),B.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},B.prototype.handleEvent=function(l){var m="on"+l.type;this[m]&&this[m](l)},B.prototype.getSize=function(){this.size=j(this.element)},B.prototype.css=function(m){var o=this.element.style;for(var l in m){var p=w[l]||l;o[p]=m[l]}},B.prototype.getPosition=function(){var p=c(this.element),v=this.layout.options,m=v.isOriginLeft,F=v.isOriginTop,y=parseInt(p[m?"left":"right"],10),u=parseInt(p[F?"top":"bottom"],10);y=isNaN(y)?0:y,u=isNaN(u)?0:u;var l=this.layout.size;y-=m?l.paddingLeft:l.paddingRight,u-=F?l.paddingTop:l.paddingBottom,this.position.x=y,this.position.y=u},B.prototype.layoutPosition=function(){var m=this.layout.size,o=this.layout.options,l={};o.isOriginLeft?(l.left=this.position.x+m.paddingLeft+"px",l.right=""):(l.right=this.position.x+m.paddingRight+"px",l.left=""),o.isOriginTop?(l.top=this.position.y+m.paddingTop+"px",l.bottom=""):(l.bottom=this.position.y+m.paddingBottom+"px",l.top=""),this.css(l),this.emitEvent("layout",[this])};var k=i?function(l,m){return"translate3d("+l+"px, "+m+"px, 0)"}:function(l,m){return"translate("+l+"px, "+m+"px)"};B.prototype._transitionTo=function(J,F){this.getPosition();var v=this.position.x,p=this.position.y,m=parseInt(J,10),l=parseInt(F,10),K=m===this.position.x&&l===this.position.y;if(this.setPosition(J,F),K&&!this.isTransitioning){return this.layoutPosition(),void 0}var H=J-v,I=F-p,y={},G=this.layout.options;H=G.isOriginLeft?H:-H,I=G.isOriginTop?I:-I,y.transform=k(H,I),this.transition({to:y,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},B.prototype.goTo=function(l,m){this.setPosition(l,m),this.layoutPosition()},B.prototype.moveTo=z?B.prototype._transitionTo:B.prototype.goTo,B.prototype.setPosition=function(l,m){this.position.x=parseInt(l,10),this.position.y=parseInt(m,10)},B.prototype._nonTransition=function(l){this.css(l.to),l.isCleaning&&this._removeStyles(l.to);for(var m in l.onTransitionEnd){l.onTransitionEnd[m].call(this)}},B.prototype._transition=function(m){if(!parseFloat(this.layout.options.transitionDuration)){return this._nonTransition(m),void 0}var o=this._transn;for(var l in m.onTransitionEnd){o.onEnd[l]=m.onTransitionEnd[l]}for(l in m.to){o.ingProperties[l]=!0,m.isCleaning&&(o.clean[l]=!0)}if(m.from){this.css(m.from);var p=this.element.offsetHeight;p=null}this.enableTransition(m.to),this.css(m.to),this.isTransitioning=!0};var A=q&&h(q)+",opacity";B.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:A,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(x,this,!1))},B.prototype.transition=B.prototype[D?"_transition":"_nonTransition"],B.prototype.onwebkitTransitionEnd=function(l){this.ontransitionend(l)},B.prototype.onotransitionend=function(l){this.ontransitionend(l)};var s={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};B.prototype.ontransitionend=function(l){if(l.target===this.element){var m=this._transn,r=s[l.propertyName]||l.propertyName;if(delete m.ingProperties[r],a(m.ingProperties)&&this.disableTransition(),r in m.clean&&(this.element.style[l.propertyName]="",delete m.clean[r]),r in m.onEnd){var p=m.onEnd[r];p.call(this),delete m.onEnd[r]}this.emitEvent("transitionEnd",[this])}},B.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(x,this,!1),this.isTransitioning=!1},B.prototype._removeStyles=function(m){var o={};for(var l in m){o[l]=""}this.css(o)};var C={transitionProperty:"",transitionDuration:""};return B.prototype.removeTransitionStyles=function(){this.css(C)},B.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},B.prototype.remove=function(){if(!D||!parseFloat(this.layout.options.transitionDuration)){return this.removeElem(),void 0}var l=this;this.on("transitionEnd",function(){return l.removeElem(),!0}),this.hide()},B.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var l=this.layout.options;this.transition({from:l.hiddenStyle,to:l.visibleStyle,isCleaning:!0})},B.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var l=this.layout.options;this.transition({from:l.visibleStyle,to:l.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},B.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},B}var d=b.getComputedStyle,c=d?function(e){return d(e,null)}:function(e){return e.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],g):(b.Outlayer={},b.Outlayer.Item=g(b.EventEmitter,b.getSize,b.getStyleProperty))}(window),function(A){function v(c,d){for(var a in d){c[a]=d[a]}return c}function m(a){return"[object Array]"===f.call(a)}function j(a){var c=[];if(m(a)){c=a}else{if(a&&"number"==typeof a.length){for(var h=0,d=a.length;d>h;h++){c.push(a[h])}}else{c.push(a)}}return c}function g(c,d){var a=k(d,c);-1!==a&&d.splice(a,1)}function b(a){return a.replace(/(.)([A-Z])/g,function(d,h,c){return h+"-"+c}).toLowerCase()}function B(e,t,a,d,n,c){function o(p,l){if("string"==typeof p&&(p=y.querySelector(p)),!p||!w(p)){return z&&z.error("Bad "+this.constructor.namespace+" element: "+p),void 0}this.element=p,this.options=v({},this.constructor.defaults),this.option(l);var s=++h;this.element.outlayerGUID=s,r[s]=this,this._create(),this.options.isInitLayout&&this.layout()}var h=0,r={};return o.namespace="outlayer",o.Item=c,o.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},v(o.prototype,a.prototype),o.prototype.option=function(i){v(this.options,i)},o.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),v(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},o.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},o.prototype._itemize=function(u){for(var E=this._filterFindItemElements(u),p=this.constructor.Item,G=[],F=0,D=E.length;D>F;F++){var C=E[F],l=new p(C,this);G.push(l)}return G},o.prototype._filterFindItemElements=function(H){H=j(H);for(var E=this.options.itemSelector,C=[],p=0,l=H.length;l>p;p++){var I=H[p];if(w(I)){if(E){n(I,E)&&C.push(I);for(var F=I.querySelectorAll(E),G=0,D=F.length;D>G;G++){C.push(F[G])}}else{C.push(I)}}}return C},o.prototype.getItemElements=function(){for(var p=[],s=0,l=this.items.length;l>s;s++){p.push(this.items[s].element)}return p},o.prototype.layout=function(){this._resetLayout(),this._manageStamps();var i=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,i),this._isLayoutInited=!0},o.prototype._init=o.prototype.layout,o.prototype._resetLayout=function(){this.getSize()},o.prototype.getSize=function(){this.size=d(this.element)},o.prototype._getMeasurement=function(p,s){var l,u=this.options[p];u?("string"==typeof u?l=this.element.querySelector(u):w(u)&&(l=u),this[p]=l?d(l)[s]:u):this[p]=0},o.prototype.layoutItems=function(i,l){i=this._getItemsForLayout(i),this._layoutItems(i,l),this._postLayout()},o.prototype._getItemsForLayout=function(p){for(var s=[],l=0,C=p.length;C>l;l++){var u=p[l];u.isIgnored||s.push(u)}return s},o.prototype._layoutItems=function(H,E){function D(){C.emitEvent("layoutComplete",[C,H])}var C=this;if(!H||!H.length){return D(),void 0}this._itemsOn(H,"layout",D);for(var p=[],l=0,I=H.length;I>l;l++){var F=H[l],G=this._getItemLayoutPosition(F);G.item=F,G.isInstant=E||F.isLayoutInstant,p.push(G)}this._processLayoutQueue(p)},o.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},o.prototype._processLayoutQueue=function(p){for(var s=0,l=p.length;l>s;s++){var u=p[s];this._positionItem(u.item,u.x,u.y,u.isInstant)}},o.prototype._positionItem=function(p,s,l,u){u?p.goTo(s,l):p.moveTo(s,l)},o.prototype._postLayout=function(){this.resizeContainer()},o.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var i=this._getContainerSize();i&&(this._setContainerMeasure(i.width,!0),this._setContainerMeasure(i.height,!1))}},o.prototype._getContainerSize=x,o.prototype._setContainerMeasure=function(p,s){if(void 0!==p){var l=this.size;l.isBorderBox&&(p+=s?l.paddingLeft+l.paddingRight+l.borderLeftWidth+l.borderRightWidth:l.paddingBottom+l.paddingTop+l.borderTopWidth+l.borderBottomWidth),p=Math.max(p,0),this.element.style[s?"width":"height"]=p+"px"}},o.prototype._itemsOn=function(I,F,D){function C(){return p++,p===l&&D.call(J),!0}for(var p=0,l=I.length,J=this,G=0,H=I.length;H>G;G++){var E=I[G];E.on(F,C)}},o.prototype.ignore=function(i){var l=this.getItem(i);l&&(l.isIgnored=!0)},o.prototype.unignore=function(i){var l=this.getItem(i);l&&delete l.isIgnored},o.prototype.stamp=function(p){if(p=this._find(p)){this.stamps=this.stamps.concat(p);for(var s=0,l=p.length;l>s;s++){var u=p[s];this.ignore(u)}}},o.prototype.unstamp=function(p){if(p=this._find(p)){for(var s=0,l=p.length;l>s;s++){var u=p[s];g(u,this.stamps),this.unignore(u)}}},o.prototype._find=function(i){return i?("string"==typeof i&&(i=this.element.querySelectorAll(i)),i=j(i)):void 0},o.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var p=0,s=this.stamps.length;s>p;p++){var l=this.stamps[p];this._manageStamp(l)}}},o.prototype._getBoundingRect=function(){var i=this.element.getBoundingClientRect(),l=this.size;this._boundingRect={left:i.left+l.paddingLeft+l.borderLeftWidth,top:i.top+l.paddingTop+l.borderTopWidth,right:i.right-(l.paddingRight+l.borderRightWidth),bottom:i.bottom-(l.paddingBottom+l.borderBottomWidth)}},o.prototype._manageStamp=x,o.prototype._getElementOffset=function(p){var s=p.getBoundingClientRect(),l=this._boundingRect,C=d(p),u={left:s.left-l.left-C.marginLeft,top:s.top-l.top-C.marginTop,right:l.right-s.right-C.marginRight,bottom:l.bottom-s.bottom-C.marginBottom};return u},o.prototype.handleEvent=function(i){var l="on"+i.type;this[l]&&this[l](i)},o.prototype.bindResize=function(){this.isResizeBound||(e.bind(A,"resize",this),this.isResizeBound=!0)},o.prototype.unbindResize=function(){this.isResizeBound&&e.unbind(A,"resize",this),this.isResizeBound=!1},o.prototype.onresize=function(){function i(){l.resize(),delete l.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var l=this;this.resizeTimeout=setTimeout(i,100)},o.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},o.prototype.needsResizeLayout=function(){var i=d(this.element),l=this.size&&i;return l&&i.innerWidth!==this.size.innerWidth},o.prototype.addItems=function(i){var l=this._itemize(i);return l.length&&(this.items=this.items.concat(l)),l},o.prototype.appended=function(i){var l=this.addItems(i);l.length&&(this.layoutItems(l,!0),this.reveal(l))},o.prototype.prepended=function(p){var s=this._itemize(p);if(s.length){var l=this.items.slice(0);this.items=s.concat(l),this._resetLayout(),this._manageStamps(),this.layoutItems(s,!0),this.reveal(s),this.layoutItems(l)}},o.prototype.reveal=function(p){var s=p&&p.length;if(s){for(var l=0;s>l;l++){var u=p[l];u.reveal()}}},o.prototype.hide=function(p){var s=p&&p.length;if(s){for(var l=0;s>l;l++){var u=p[l];u.hide()}}},o.prototype.getItem=function(p){for(var s=0,l=this.items.length;l>s;s++){var u=this.items[s];if(u.element===p){return u}}},o.prototype.getItems=function(p){if(p&&p.length){for(var u=[],l=0,D=p.length;D>l;l++){var C=p[l],s=this.getItem(C);s&&u.push(s)}return u}},o.prototype.remove=function(p){p=j(p);var D=this.getItems(p);if(D&&D.length){this._itemsOn(D,"remove",function(){this.emitEvent("removeComplete",[this,D])});for(var l=0,C=D.length;C>l;l++){var u=D[l];u.remove(),g(u,this.items)}}},o.prototype.destroy=function(){var p=this.element.style;p.height="",p.position="",p.width="";for(var s=0,l=this.items.length;l>s;s++){var u=this.items[s];u.destroy()}this.unbindResize(),delete this.element.outlayerGUID,q&&q.removeData(this.element,this.constructor.namespace)},o.data=function(i){var l=i&&i.outlayerGUID;return l&&r[l]},o.create=function(p,l){function s(){o.apply(this,arguments)}return Object.create?s.prototype=Object.create(o.prototype):v(s.prototype,o.prototype),s.prototype.constructor=s,s.defaults=v({},o.defaults),v(s.defaults,l),s.prototype.settings={},s.namespace=p,s.data=o.data,s.Item=function(){c.apply(this,arguments)},s.Item.prototype=new c,t(function(){for(var H=b(p),F=y.querySelectorAll(".js-"+H),C="data-"+H+"-options",K=0,J=F.length;J>K;K++){var u,I=F[K],E=I.getAttribute(C);try{u=E&&JSON.parse(E)}catch(G){z&&z.error("Error parsing "+C+" on "+I.nodeName.toLowerCase()+(I.id?"#"+I.id:"")+": "+G);continue}var D=new s(I,u);q&&q.data(I,p,D)}}),q&&q.bridget&&q.bridget(p,s),s},o.Item=c,o}var y=A.document,z=A.console,q=A.jQuery,x=function(){},f=Object.prototype.toString,w="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},k=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:function(c,d){for(var a=0,h=c.length;h>a;a++){if(c[a]===d){return a}}return -1};"function"==typeof define&&define.amd?define(["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],B):A.Outlayer=B(A.eventie,A.docReady,A.EventEmitter,A.getSize,A.matchesSelector,A.Outlayer.Item)}(window),function(b){function c(d,f){var g=d.create("masonry");return g.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;){this.colYs.push(0)}this.maxY=0},g.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var h=this.items[0],e=h&&h.element;this.columnWidth=e&&f(e).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},g.prototype.getContainerWidth=function(){var h=this.options.isFitWidth?this.element.parentNode:this.element,e=f(h);this.containerWidth=e&&e.innerWidth},g.prototype._getItemLayoutPosition=function(y){y.getSize();var q=y.size.outerWidth%this.columnWidth,l=q&&1>q?"round":"ceil",k=Math[l](y.size.outerWidth/this.columnWidth);k=Math.min(k,this.cols);for(var i=this._getColGroup(k),z=Math.min.apply(Math,i),w=a(i,z),x={x:this.columnWidth*w,y:z},m=z+y.size.outerHeight,v=this.cols+1-i.length,j=0;v>j;j++){this.colYs[w+j]=m}return x},g.prototype._getColGroup=function(j){if(2>j){return this.colYs}for(var k=[],h=this.cols+1-j,m=0;h>m;m++){var l=this.colYs.slice(m,m+j);k[m]=Math.max.apply(Math,l)}return k},g.prototype._manageStamp=function(v){var l=f(v),k=this._getElementOffset(v),j=this.options.isOriginLeft?k.left:k.right,e=j+l.outerWidth,w=Math.floor(j/this.columnWidth);w=Math.max(0,w);var p=Math.floor(e/this.columnWidth);p-=e%this.columnWidth?0:1,p=Math.min(this.cols-1,p);for(var q=(this.options.isOriginTop?k.top:k.bottom)+l.outerHeight,m=w;p>=m;m++){this.colYs[m]=Math.max(q,this.colYs[m])}},g.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},g.prototype._getContainerFitWidth=function(){for(var h=0,i=this.cols;--i&&0===this.colYs[i];){h++}return(this.cols-h)*this.columnWidth-this.gutter},g.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},g}var a=Array.prototype.indexOf?function(d,f){return d.indexOf(f)}:function(f,g){for(var d=0,j=f.length;j>d;d++){var h=f[d];if(h===g){return d}}return -1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],c):b.Masonry=c(b.Outlayer,b.getSize)}(window),function(k){function g(a,i){a[l]=i}var f=k.MD={};f.pages={};var d;docReady(function(){d=document.querySelector("#notification");var a=document.body.getAttribute("data-page");a&&"function"==typeof f[a]&&f[a]()}),f.getSomeItemElements=function(){for(var q=document.createDocumentFragment(),w=[],p=0;3>p;p++){var y=document.createElement("div"),x=Math.random(),v=x>0.85?"w4":x>0.7?"w2":"",u=Math.random(),m=u>0.85?"h4":u>0.7?"h2":"";y.className="item "+v+" "+m,q.appendChild(y),w.push(y)}};var c,b=document.documentElement,l=void 0!==b.textContent?"textContent":"innerText",h=getStyleProperty("transition"),j=h?1000:1500;f.notify=function(a,e){g(d,a),h&&(d.style[h]="none"),d.style.display="block",d.style.opacity="1",e&&(c&&clearTimeout(c),c=setTimeout(f.hideNotify,j))},f.hideNotify=function(){h?(d.style[h]="opacity 1.0s",d.style.opacity="0"):d.style.display="none"}}(window),function(b){function c(){var g=new Date,h=g.getMinutes();h=10>h?"0"+h:h;var f=g.getSeconds();return f=10>f?"0"+f:f,[g.getHours(),h,f].join(":")}function a(e){d.notify(e+" at "+c(),!0)}var d=b.MD;d.events=function(){(function(){var f=document.querySelector("#layout-complete-demo .masonry"),g=new Masonry(f,{columnWidth:60});g.on("layoutComplete",function(h,i){a("Masonry layout completed on "+i.length+" items")}),eventie.bind(f,"click",function(e){classie.has(e.target,"item")&&(classie.toggle(e.target,"gigante"),g.layout())})})(),function(){var f=document.querySelector("#remove-complete-demo .masonry"),g=new Masonry(f,{columnWidth:60});g.on("removeComplete",function(h,i){a("Removed "+i.length+" items")}),eventie.bind(f,"click",function(e){classie.has(e.target,"item")&&g.remove(e.target)})}()}}(window),function(b){var c=b.MD,a=getStyleProperty("transition"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[a];c.faq=function(){(function(){var f=document.querySelector("#animate-item-size .masonry"),g=new Masonry(f,{columnWidth:60});eventie.bind(f,"click",function(h){var e=h.target;if(classie.has(e,"item-content")){var j=e.parentNode;classie.toggleClass(j,"is-expanded"),g.layout()}})})(),function(){var f=document.querySelector("#animate-item-size-responsive .masonry"),g=new Masonry(f,{columnWidth:".grid-sizer",itemSelector:".item"});eventie.bind(f,"click",function(j){var n=j.target;if(classie.has(n,"item-content")){var m=getSize(n);n.style[a]="none",n.style.width=m.width+"px",n.style.height=m.height+"px";var l=n.parentNode;classie.toggleClass(l,"is-expanded");var e=n.offsetWidth;if(n.style[a]="",a){var i=function(){n.style.width="",n.style.height="",n.removeEventListener(d,i,!1)};n.addEventListener(d,i,!1)}var k=getSize(l);n.style.width=k.width+"px",n.style.height=k.height+"px",e=null,g.layout()}})}()}}(window),function(d){function h(){for(var i=[],o=document.createDocumentFragment(),n=b,m=0,a=n.length;a>m;m++){var l=c(n[m]);i.push(l),o.appendChild(l)}imagesLoaded(o).on("progress",function(q,r){var p=r.img.parentNode.parentNode;k.appendChild(p),j.appended(p)})}function c(l){var m=document.createElement("div");m.className="hero-item has-example is-hidden";var a=document.createElement("a");a.href=l.url;var q=document.createElement("img");q.src=l.image;var p=document.createElement("p");return p.className="example-title",p.textContent=l.title,a.appendChild(q),a.appendChild(p),m.appendChild(a),m}var k,j,g,f=d.MD;f.index=function(){(function(){var a=document.querySelector("#hero");k=a.querySelector(".hero-masonry"),j=new Masonry(k,{itemSelector:".hero-item",columnWidth:".grid-sizer"}),h()})(),g=document.querySelector("#load-more-examples")};var b=[{title:"Erik Johansson",url:"http://erikjohanssonphoto.com/work/imagecats/personal/",image:"http://i.imgur.com/6Lo8oun.jpg"},{title:"Tumblr Staff: Archive",url:"http://staff.tumblr.com/archive",image:"http://i.imgur.com/igjvRa3.jpg"},{title:"Halcyon theme",url:"http://halcyon-theme.tumblr.com/",image:"http://i.imgur.com/A1RSOhg.jpg"},{title:"RESIZE.THATSH.IT",url:"http://resize.thatsh.it/",image:"http://i.imgur.com/00xWxLG.png"},{title:"Vox Media",url:"http://www.voxmedia.com",image:"http://i.imgur.com/xSiTFij.jpg"},{title:"Kristian Hammerstad",url:"http://www.kristianhammerstad.com/",image:"http://i.imgur.com/Zwd7Sch.jpg"},{title:"Loading Effects for Grid Items | Demo 2",url:"http://tympanus.net/Development/GridLoadingEffects/index2.html",image:"http://i.imgur.com/iFBSB1t.jpg"}]}(window),function(b){function c(){var f=document.createElement("div"),g=Math.random(),d=Math.random(),j=g>0.92?"w4":g>0.8?"w3":g>0.6?"w2":"",h=d>0.85?"h4":d>0.6?"h3":d>0.35?"h2":"";return f.className="item "+j+" "+h,f}var a=b.MD;a.methods=function(){(function(){var e=document.querySelector("#appended-demo"),d=e.querySelector(".masonry"),g=e.querySelector("button"),f=new Masonry(d,{columnWidth:60});eventie.bind(g,"click",function(){for(var h=[],k=document.createDocumentFragment(),j=0;3>j;j++){var i=c();k.appendChild(i),h.push(i)}d.appendChild(k),f.appended(h)})})(),function(){var f=document.querySelector("#destroy-demo"),g=f.querySelector(".masonry"),d=f.querySelector("button"),j=new Masonry(g,{columnWidth:60}),h=!0;eventie.bind(d,"click",function(){h?j.destroy():j=new Masonry(g),h=!h})}(),function(){var d=document.querySelector("#layout-demo .masonry"),f=new Masonry(d,{columnWidth:60});eventie.bind(d,"click",function(e){classie.has(e.target,"item")&&(classie.toggle(e.target,"gigante"),f.layout())})}(),function(){var e=document.querySelector("#prepended-demo"),d=e.querySelector(".masonry"),g=e.querySelector("button"),f=new Masonry(d,{columnWidth:60});eventie.bind(g,"click",function(){for(var h=[],k=document.createDocumentFragment(),j=0;3>j;j++){var i=c();k.appendChild(i),h.push(i)}d.insertBefore(k,d.firstChild),f.prepended(h)})}(),function(){var f=document.querySelector("#stamp-demo"),g=f.querySelector(".stamp"),d=f.querySelector("button"),j=new Masonry(f.querySelector(".masonry"),{columnWidth:60,itemSelector:".item"}),h=!1;eventie.bind(d,"click",function(){h?j.unstamp(g):j.stamp(g),j.layout(),h=!h})}(),function(){var d=document.querySelector("#remove-demo .masonry"),f=new Masonry(d,{columnWidth:60});eventie.bind(d,"click",function(e){classie.has(e.target,"item")&&(f.remove(e.target),f.layout())})}()}}(window);